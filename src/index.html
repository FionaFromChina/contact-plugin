<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>jQuery插件测试</title>
    <meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
    <link href="css/lib/modal.css" rel="stylesheet">
    <link href="css/lib/terminal-select.css" rel="stylesheet">
    <link href="css/lib/common.css" rel="stylesheet">
</head>
<body>
<div class="terminal-select"></div>
<script src="js/libs/jquery.js"></script>
<script src="js/libs/modal.js"></script>
<script src="js/jquery.getcontact.js"></script>
<script>

    var options = {
        initData:[{
            id:"1",
            displayName:"aa",
            avatar:"imgsrc",
            type:"2"
        }],
        contactUrl:"",//获取contact列表的URL
        inputName:"",//生成的inputDom的name属性值
        callback:{
            beforeDelete: function(item){
                //return false; 终端删除
                //这里可以做一些错误处理,比如某些item是不允许删除的,或者加是否确定要删除的confirm dialog等.

            },
            beforeAddedFromInput: function(inputValue){

                return{
                    "type":"2",
                    "number": "736827",
                    "avatar": "http://devavatar.ainemo.com/nemo/avatar/115488-07da5995-9592-4db5-a015-e90c77f14036-1483497017859",
                    "name": "kelei的小鱼",
                    "id": "115423"
                };
                //return {}; 不添加

            },
            onSelect: function(items){
                //items,被选中的items

            },
            onfetchedUrlCalled : function(data){
                //data 结构:
                var data = [{
                    "title":"小鱼企业",
                    "lists":[{
                        "type":"2",
                        "number": "736827",
                        "avatar": "http://devavatar.ainemo.com/nemo/avatar/115488-07da5995-9592-4db5-a015-e90c77f14036-1483497017859",
                        "name": "kelei的小鱼",
                        "id": "115423"
                    },{
                        "type":"2",
                        "number": "736827",
                        "avatar": "http://devavatar.ainemo.com/nemo/avatar/115488-07da5995-9592-4db5-a015-e90c77f14036-1483497017859",
                        "name": "kelei的小鱼",
                        "id": "11541"
                    }]
                },{
                    "title":"分组2",
                    "lists":[{
                        "type":"2",
                        "number": "736827",
                        "avatar": "http://devavatar.ainemo.com/nemo/avatar/115488-07da5995-9592-4db5-a015-e90c77f14036-1483497017859",
                        "name": "kelei的小鱼",
                        "id": "115488"
                    }]
                }];
                var errorMsg = "获取错误";
                return data; //正确情况下返回
                //return errorMsg = "获取错误"; 错误情况下返回
            }
        }
    };


    $('.terminal-select').terminalSelect({
//        initData:[{
//            id:"1",
//            displayName:"aa",
//            avatar:"imgsrc",
//            type:"2"
//        },{
//            id:"2",
//            displayName:"bbb",
//            avatar:"imgsrc",
//            type:"2"
//        }],
        contactUrl:"initData.json",
        callback:{
//            beforeAddedFromInput: function(inputVal) {
////                alert('添加的有问题!值是'+ inputVal + '不加了~~~');
//                return{
//                    id:"789",
//                    displayName:"asdjfkf",
//                    avatar:"imgsrc",
//                    type:"2"
//                }
//            },
//            beforeDelete : function(id) {
//                alert('不能删除!!哼哼');
//              return false;
//            },
//            onSelect : function(items) {
//
//            }
//            onfetchedUrlCalled :function(data) {
//
//            }
        }
    });
    console.log($('.terminal-select').terminalSelect('getSelected'));


</script>
</body>
</html>